\section{Preliminaries}%
\label{sec:preliminaries}

We start by defining some relevant concepts.

% \begin{definition}[Strategy]%
%     A strategy $\sigma : S \to A$ over the state space $\mathcal{S}$ is a
%     mapping from any state $s \in \mathcal{S}$ to an action $a \in Act$ where
%     $Act$ is a finite set of allowed actions. 
% \end{definition}

% A strategy can be represented in several different ways. In
% Q-learning~\cite{Sutton1998}, the approach is to estimate a function $Q : S, A
% \to \mathbb{R}$ that maps a state-action pair $(s,a)$ to a real number, that is
% an estimation of the expected cost of taking action $a$ in state
% $s$.\footnote{The Q-value can also be the expected reward.} Choosing an action
% in state $s$ under the strategy $\sigma$ is then given by $\sigma(s) =
% \argmin_{a \in Act}Q(s,a)$.

% For a continuous state space, the Q-function can either be estimated using
% function approxmiation techniques or by discretization of the state space. In
% the latter case, the state space is partitioned into a finite set of convex
% regions, each defining a discrete state $S$ as a list of lower and upper bounds,
% $S_i^{\min}, S_i^{\max}$, for each $i = 1,\ldots,K$. The Q-values can then be
% estimated for the entire region $S$, and we say that $Q(s,a) = Q(S,a)$ for all
% $s \in S$. This allows for a tabular representation of the Q-function, as in the
% toy example in Table~\ref{tab:exStrategyQTable}.

\begin{definition}[Partitionings]%
\label{def:partitioning}
    A partitioning $\mathcal{A}$ of the state space $\mathcal{S} \in
    \mathbb{R}^K$ is a set of regions $\nu$ that divides $\mathcal{S}$ such that
    $\bigcup_{\nu \in \mathcal{A}}\nu = \mathcal{S}$ and for any two regions
    $\nu, \nu' \in \mathcal{A}$ where $\nu \neq \nu'$ it holds that $\nu \cap
    \nu' = \emptyset$.
\end{definition}

\noindent
For an \textit{axis aligned} partitioning, each region $\nu$ can be expressed in
terms of two corner points, $s^{\min}, s^{\max} \in \mathcal{S}$, so that for
each $s = (s_1, \ldots, s_K) \in \nu$ it holds that $s^{\min}_i < s_i \le
s^{\max}_i$ for $i = 1,\ldots,K$. In this work we exclusively consider axis
aligned partitionings and we define all regions as a tuples $\nu = (s^{\min},
s^{\max})$. Note that the entire state space $\mathcal{S} \in \mathbb{R}^K$ can
be described as a region: if $\mathcal{S}$ is unbounded in all dimensions
(meaning its limits are positive and negative infinity) then $s^{\min}_i$ and
$s^{\max}_i$ for the entire state space is $-\infty$ and $\infty$ respectively
for $i = 1,\ldots,K$.


\begin{definition}[Decision tree]%
\label{def:decisionTree}
    A binary decision tree over the domain $\mathcal{S} \in \mathbb{R}^K$ is a
    tuple $\mathcal{T} = (\eta_{0}, \mathcal{N}, \mathcal{L}, \mathcal{D})$
    where $\eta_{0} \in \mathcal{N}$ is the root node of the tree, $\mathcal{N}$
    is a set of branching nodes and $\mathcal{L}$ is a set of leaf nodes, each
    of which is assigned a decision $\delta$ from the set of decisions
    $\mathcal{D}$. Each branch node $\eta \in \mathcal{N}$ consists of two child
    nodes and a predicate function of the form $\rho_{\eta}(s) = s_{i} \leq c$ with $s
    \in \mathcal{S}$ and $c$ being a constant.
\end{definition}

\noindent
Given a state $s \in \mathcal{S}$ and a decision tree $\mathcal{T}$, we can
evaluate $\mathcal{T}(s)$ to obtain a decision $\delta$ by following the
\textit{path} from the root node to a leaf node given by the repeated evaluation
of the predicate function $\rho_{\eta}(s)$ at each node $\eta$, starting with
the root node and continuing with the left child if $\rho_{\eta}(s)$ evaluates
to true and with the right child if it evaluates to false. When we encounter a
leaf node $\ell$, we return the decision assigned to $\ell$. Further, we also
allow evaluating a region of $\mathcal{S}$.  Given a region $\nu = (s^{\min},
s^{\max})$, $[\delta]_{\nu} = \mathcal{T}(\nu)$ is the set of all decisions that
can be obtained evaluating configurations of $\nu$, ie. $\mathcal{T}(\nu) = \{
\mathcal{T}(s) \mid s \in \nu \}$.

We denote the path
$\lambda(\ell)$ and define it as an ordered list of tuples of the form
$(\eta_j, b)$ where $\eta_j$ is the $j$th node on the path ($\eta_0$ will always
be the root node) and $b$ is a binary value indicating wether the path continues
with the left child $(b = 1)$ or right child $(b = 0)$.\todo{%
    Not sure if it makes sense or is necessary to state which value of $b$ means
    what. The reasoning for my choice is that $b = 1$ indicates `true' and it is
    when $\rho_{\eta_j}(s)$ is true, that we choose the left path.
}
The path can then be said to define a region where the corner points $s^{\min}$
and $s^{\max}$ are given by compiling the bounds on each dimension $i =
1,\ldots,K$ given by the predicate function $\rho_{\eta_j} = i_{\eta_j} \leq
c_{\eta_j}$ for each $\eta_j \in \lambda(\ell)$ into points. The coordinates for
each point is given by

\begin{align*}
    s^{\min}_i&= \max(\{\>
        c_{\eta}\> |\>
        (\eta, b) \in \lambda(\ell),\>
        i_{\eta} = i, \>
        b = 1\>
    \}) \\
    s^{\max}_i&= \min(\{\>
        c_{\eta}\> |\>
        (\eta, b) \in \lambda(\ell),\>
        i_{\eta} = i,\>
        b = 0\>
    \})
\end{align*}\todo{%
    I struggled a lot with coming up with a good way of writing this definition.
    Do let me know if it works (and if it is even necessary to describe how a
    region is constructed from a leaf node).
}


\noindent
for all $i = 1,\ldots,K$. We write $\nu_{\ell}$ to denote the region associated
with the leaf node $\ell$.

The set of regions obtained from all the leaf nodes of a decision tree
constitutes a complete partitioning of a state space $\mathcal{S}$ in accordance
with Definition\ref{def:partitioning}. We thus say that $\mathcal{T}$ induces a partitioning
$\mathcal{A}_{\mathcal{T}} = \{ \nu_{\ell} \mid \ell \in \mathcal{L} \}$. For
any region $\nu$ and a decision tree $\mathcal{T}$ we say, that $\nu$ has
\textit{singular mapping} in $\mathcal{T}$ if for all $p \in \nu$,
$\mathcal{T}(p) = \delta$ for some $\delta \in \mathcal{D}$. Naturally, all
regions in $\mathcal{A}_{\mathcal{T}}$ has singular mapping in $\mathcal{T}$.
For any partitioning $\mathcal{B}$ of the same state space, we say $\mathcal{B}$
\textit{respects} $\mathcal{T}$ if and only if every region $\nu \in
\mathcal{B}$ has singular mapping in $\mathcal{T}$.
